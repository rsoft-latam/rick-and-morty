{"ast":null,"code":"import * as sidenav from './sidenav.action';\nconst initialState = {\n  sidenavItems: [],\n  currentlyOpen: []\n};\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case sidenav.ADD_SIDENAV_ITEM:\n      {\n        const item = action.payload;\n        if (state.sidenavItems.indexOf(item) > -1) {\n          return state;\n        }\n        return Object.assign({}, state, {\n          sidenavItems: [...state.sidenavItems, item]\n        });\n      }\n    case sidenav.REMOVE_SIDENAV_ITEM:\n      {\n        const item = action.payload;\n        return Object.assign({}, state, {\n          sidenavItems: state.sidenavItems.filter(stateItem => stateItem !== item)\n        });\n      }\n    case sidenav.TOGGLE_OPEN_SIDENAV_ITEM:\n      {\n        const item = action.payload;\n        let currentlyOpen = state.currentlyOpen;\n        if (state.currentlyOpen.indexOf(item) > -1) {\n          if (currentlyOpen.length > 1) {\n            currentlyOpen = currentlyOpen.slice(0, currentlyOpen.indexOf(item));\n          } else {\n            currentlyOpen = [];\n          }\n        } else {\n          currentlyOpen = getAllParentItems(item);\n        }\n        return Object.assign({}, state, {\n          currentlyOpen: currentlyOpen\n        });\n      }\n    case sidenav.SET_CURRENTLY_OPEN_BY_ROUTE:\n      {\n        const route = action.payload;\n        let currentlyOpen = [];\n        const item = findByRouteRecursive(route, state.sidenavItems);\n        if (item && item.hasParent()) {\n          currentlyOpen = getAllParentItems(item.parent);\n        } else if (item) {\n          currentlyOpen = [item];\n        }\n        return Object.assign({}, state, {\n          currentlyOpen: currentlyOpen\n        });\n      }\n    default:\n      {\n        return state;\n      }\n  }\n}\nfunction getAllParentItems(item, currentlyOpenTemp = []) {\n  currentlyOpenTemp.unshift(item);\n  if (item.hasParent()) {\n    return getAllParentItems(item.parent, currentlyOpenTemp);\n  } else {\n    return currentlyOpenTemp;\n  }\n}\nfunction findByRouteRecursive(route, collection = this.sidenavItems) {\n  let result = collection.find(item => item.route === route);\n  if (!result) {\n    collection.forEach(item => {\n      if (item.hasSubItems()) {\n        const found = findByRouteRecursive(route, item.subItems || []);\n        if (found) {\n          result = found;\n          return false;\n        }\n      }\n    });\n  }\n  return result;\n}\nexport const getSidenavItems = state => state.sidenavItems;\nexport const getSidenavCurrentlyOpen = state => state.currentlyOpen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}